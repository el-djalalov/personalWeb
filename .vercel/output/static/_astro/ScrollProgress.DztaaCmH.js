import{j as R}from"./jsx-runtime.D3GSbgeI.js";import{r as C}from"./index.yGrMsBkE.js";import{f as h,g as P,r as M,p as N,v as D,h as F,j as X,k as Y,c as j,n as V,s as $,u as G,b as _,w as J,a as m,m as q}from"./proxy.BYv4gV3i.js";import{a as K}from"./use-spring.C3GtXx_l.js";import"./index.yBjzXJbu.js";function k(e,t){let n;const s=()=>{const{currentTime:r}=t,o=(r===null?0:r.value)/100;n!==o&&e(o),n=o};return h.update(s,!0),()=>P(s)}const v=new WeakMap;let d;function Q(e,t){if(t){const{inlineSize:n,blockSize:s}=t[0];return{width:n,height:s}}else return e instanceof SVGElement&&"getBBox"in e?e.getBBox():{width:e.offsetWidth,height:e.offsetHeight}}function U({target:e,contentRect:t,borderBoxSize:n}){var s;(s=v.get(e))===null||s===void 0||s.forEach(r=>{r({target:e,contentSize:t,get size(){return Q(e,n)}})})}function Z(e){e.forEach(U)}function ee(){typeof ResizeObserver>"u"||(d=new ResizeObserver(Z))}function te(e,t){d||ee();const n=M(e);return n.forEach(s=>{let r=v.get(s);r||(r=new Set,v.set(s,r)),r.add(t),d?.observe(s)}),()=>{n.forEach(s=>{const r=v.get(s);r?.delete(t),r?.size||d?.unobserve(s)})}}const w=new Set;let p;function se(){p=()=>{const e={width:window.innerWidth,height:window.innerHeight},t={target:window,size:e,contentSize:e};w.forEach(n=>n(t))},window.addEventListener("resize",p)}function ne(e){return w.add(e),p||se(),()=>{w.delete(e),!w.size&&p&&(p=void 0)}}function re(e,t){return typeof e=="function"?ne(e):te(e,t)}const le=50,S=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),oe=()=>({time:0,x:S(),y:S()}),ie={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function H(e,t,n,s){const r=n[t],{length:l,position:o}=ie[t],i=r.current,c=n.time;r.current=e[`scroll${o}`],r.scrollLength=e[`scroll${l}`]-e[`client${l}`],r.offset.length=0,r.offset[0]=0,r.offset[1]=r.scrollLength,r.progress=N(0,r.scrollLength,r.current);const u=s-c;r.velocity=u>le?0:D(r.current-i,u)}function ce(e,t,n){H(e,"x",t,n),H(e,"y",t,n),t.time=n}function fe(e,t){const n={x:0,y:0};let s=e;for(;s&&s!==t;)if(s instanceof HTMLElement)n.x+=s.offsetLeft,n.y+=s.offsetTop,s=s.offsetParent;else if(s.tagName==="svg"){const r=s.getBoundingClientRect();s=s.parentElement;const l=s.getBoundingClientRect();n.x+=r.left-l.left,n.y+=r.top-l.top}else if(s instanceof SVGGraphicsElement){const{x:r,y:l}=s.getBBox();n.x+=r,n.y+=l;let o=null,i=s.parentNode;for(;!o;)i.tagName==="svg"&&(o=i),i=s.parentNode;s=o}else break;return n}const z={start:0,center:.5,end:1};function O(e,t,n=0){let s=0;if(e in z&&(e=z[e]),typeof e=="string"){const r=parseFloat(e);e.endsWith("px")?s=r:e.endsWith("%")?e=r/100:e.endsWith("vw")?s=r/100*document.documentElement.clientWidth:e.endsWith("vh")?s=r/100*document.documentElement.clientHeight:e=r}return typeof e=="number"&&(s=t*e),n+s}const ue=[0,0];function ae(e,t,n,s){let r=Array.isArray(e)?e:ue,l=0,o=0;return typeof e=="number"?r=[e,e]:typeof e=="string"&&(e=e.trim(),e.includes(" ")?r=e.split(" "):r=[e,z[e]?e:"0"]),l=O(r[0],n,s),o=O(r[1],t),l-o}const de={All:[[0,0],[1,1]]},ge={x:0,y:0};function he(e){return"getBBox"in e&&e.tagName!=="svg"?e.getBBox():{width:e.clientWidth,height:e.clientHeight}}function pe(e,t,n){const{offset:s=de.All}=n,{target:r=e,axis:l="y"}=n,o=l==="y"?"height":"width",i=r!==e?fe(r,e):ge,c=r===e?{width:e.scrollWidth,height:e.scrollHeight}:he(r),u={width:e.clientWidth,height:e.clientHeight};t[l].offset.length=0;let a=!t[l].interpolate;const y=s.length;for(let f=0;f<y;f++){const W=ae(s[f],u[o],c[o],i[l]);!a&&W!==t[l].interpolatorOffsets[f]&&(a=!0),t[l].offset[f]=W}a&&(t[l].interpolate=F(t[l].offset,X(s),{clamp:!1}),t[l].interpolatorOffsets=[...t[l].offset]),t[l].progress=Y(0,1,t[l].interpolate(t[l].current))}function me(e,t=e,n){if(n.x.targetOffset=0,n.y.targetOffset=0,t!==e){let s=t;for(;s&&s!==e;)n.x.targetOffset+=s.offsetLeft,n.y.targetOffset+=s.offsetTop,s=s.offsetParent}n.x.targetLength=t===e?t.scrollWidth:t.clientWidth,n.y.targetLength=t===e?t.scrollHeight:t.clientHeight,n.x.containerLength=e.clientWidth,n.y.containerLength=e.clientHeight}function ve(e,t,n,s={}){return{measure:()=>me(e,s.target,n),update:r=>{ce(e,n,r),(s.offset||s.target)&&pe(e,n,s)},notify:()=>t(n)}}const g=new WeakMap,T=new WeakMap,E=new WeakMap,b=e=>e===document.documentElement?window:e;function L(e,{container:t=document.documentElement,...n}={}){let s=E.get(t);s||(s=new Set,E.set(t,s));const r=oe(),l=ve(t,e,r,n);if(s.add(l),!g.has(t)){const i=()=>{for(const f of s)f.measure()},c=()=>{for(const f of s)f.update(j.timestamp)},u=()=>{for(const f of s)f.notify()},a=()=>{h.read(i,!1,!0),h.read(c,!1,!0),h.update(u,!1,!0)};g.set(t,a);const y=b(t);window.addEventListener("resize",a,{passive:!0}),t!==document.documentElement&&T.set(t,re(t,a)),y.addEventListener("scroll",a,{passive:!0})}const o=g.get(t);return h.read(o,!1,!0),()=>{var i;P(o);const c=E.get(t);if(!c||(c.delete(l),c.size))return;const u=g.get(t);g.delete(t),u&&(b(t).removeEventListener("scroll",u),(i=T.get(t))===null||i===void 0||i(),window.removeEventListener("resize",u))}}function we({source:e,container:t,axis:n="y"}){e&&(t=e);const s={value:0},r=L(l=>{s.value=l[n].progress*100},{container:t,axis:n});return{currentTime:s,cancel:r}}const x=new Map;function A({source:e,container:t=document.documentElement,axis:n="y"}={}){e&&(t=e),x.has(t)||x.set(t,{});const s=x.get(t);return s[n]||(s[n]=$()?new ScrollTimeline({source:t,axis:n}):we({source:t,axis:n})),s[n]}function ye(e){return e.length===2}function I(e){return e&&(e.target||e.offset)}function Ee(e,t){return ye(e)||I(t)?L(n=>{e(n[t.axis].progress,n)},t):k(e,A(t))}function xe(e,t){if(e.flatten(),I(t))return e.pause(),L(n=>{e.time=e.duration*n[t.axis].progress},t);{const n=A(t);return e.attachTimeline?e.attachTimeline(n,s=>(s.pause(),k(r=>{s.time=s.duration*r},n))):V}}function ze(e,{axis:t="y",...n}={}){const s={axis:t,...n};return typeof e=="function"?Ee(e,s):xe(e,s)}function B(e,t){J(!!(!t||t.current))}const Le=()=>({scrollX:m(0),scrollY:m(0),scrollXProgress:m(0),scrollYProgress:m(0)});function We({container:e,target:t,layoutEffect:n=!0,...s}={}){const r=G(Le);return(n?_:C.useEffect)(()=>(B("target",t),B("container",e),ze((o,{x:i,y:c})=>{r.scrollX.set(i.current),r.scrollXProgress.set(i.progress),r.scrollY.set(c.current),r.scrollYProgress.set(c.progress)},{...s,container:e?.current||void 0,target:t?.current||void 0})),[e,t,JSON.stringify(s.offset)]),r}const Be=()=>{const{scrollYProgress:e}=We(),t=K(e,{stiffness:100,damping:30,restDelta:.001});return R.jsx(q.div,{className:"fixed top-0 left-0 right-0 h-1 bg-gradient-to-r from-cyan-500 via-fuchsia-500 to-blue-500 origin-left z-[100]",style:{scaleX:t}})};export{Be as default};
