import{r as a}from"./index.yGrMsBkE.js";import{u as S,M as l,a as y,i as m,f as V,b as d,c as x,d as C}from"./proxy.BYv4gV3i.js";function h(t){const s=S(()=>y(t)),{isStatic:o}=a.useContext(l);if(o){const[,r]=a.useState(t);a.useEffect(()=>s.on("change",r),[])}return s}function p(t){return typeof t=="number"?t:parseFloat(t)}function b(t,s={}){const{isStatic:o}=a.useContext(l),r=a.useRef(null),e=h(m(t)?p(t.get()):t),u=a.useRef(e.get()),i=a.useRef(()=>{}),g=()=>{const n=r.current;n&&n.time===0&&n.sample(x.delta),c(),r.current=C({keyframes:[e.get(),u.current],velocity:e.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...s,onUpdate:i.current})},c=()=>{r.current&&r.current.stop()};return a.useInsertionEffect(()=>e.attach((n,f)=>o?f(n):(u.current=n,i.current=f,V.update(g),e.get()),c),[JSON.stringify(s)]),d(()=>{if(m(t))return t.on("change",n=>e.set(p(n)))},[e]),e}export{b as a,h as u};
